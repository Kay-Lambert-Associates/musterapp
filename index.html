<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Unity WebGL Player | Muster</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico" />
    <link rel="stylesheet" href="TemplateData/style.css" />
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    <script src="https://kit.fontawesome.com/fdf90ae6b9.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="TemplateData/tingle.min.css"/>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script>
      var gameInstance = UnityLoader.instantiate(
        "unityContainer",
        "Build/WebGL-Release.json",
        { onProgress: UnityProgress }
      );
    </script>
  </head>
  <body>
    <audio style="display: none" id="meeting-audio"></audio>
    <div class="webgl-content">
      <div
        id="unityContainer"
        style="width: 1280px; height: 720px"
      ></div>
      <div class="footer">
        <div class="fullscreen" onclick="gameInstance.SetFullscreen(1)"></div>
        <div class="title">Muster</div>
      </div>
    </div>

    <!-- BEGIN WEBGL FILE BROWSER LIB -->

    <form id="fileBrowserPopup" style="display: none;">
      <div class="fileBrowserBackground"></div>
      <div class="fileBrowserContainer">
        <span style="font-size: 4em; color: #00E2B0;">
          <i class="icon fas fa-file-upload"></i>
        </span>
        <span class="fileBrowserText">Click below to open file browser</span>
        
        <div>
          <label for="closePopup">
            <a class="button6 button-grey">Close</a>
          </label>
          <input
            type="button"
            name="closePopup"
            id="closePopup"
            style="display: none;"
            onclick="hidePopup();"
          />
          <label for="fileToUpload">
            <a class="button6 button-green bouncy">Select</a>
          </label>
          <input
            type="File"
            name="fileToUpload"
            id="fileToUpload"
            onchange="sendfile(event);return false;"
          />
        </div>
      </div>
    </form>
    <script type="text/javascript">
      function sendfile(e) {
        var files = e.target.files;
        for (var i = 0, f; (f = files[i]); i++) {
          var reader = new FileReader();
          reader.onload = (function (file) {
            return function (e) {
              gameInstance.SendMessage(
                "FileBrowserDialogLib",
                "ApplyFileName",
                escape(file.name)
              );

              (window.filedata = window.filedata ? window.filedata : {})[
                file.name
              ] = e.target.result;
              gameInstance.SendMessage(
                "FileBrowserDialogLib",
                "FileUpload",
                file.name
              );
            };
          })(f);
          reader.readAsArrayBuffer(f);
        }
      }
      function hidePopup() {
        gameInstance.SendMessage(
          "FileBrowserDialogLib",
          "CloseFilePopupDialog"
        );
      }
    </script>

    <script type="text/javascript">
      function FilterOfTypes(types) {
        document.getElementsByName("fileToUpload")[0].accept = types;
      }
    </script>
    <script src="TemplateData/amazon-chime-sdk.min.js"></script>
    <script src="TemplateData/chime.js"></script>
    <script src="TemplateData/pdf.js"></script>
    <script src="TemplateData/tingle.min.js"></script>
  </body>
</html>
