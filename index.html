<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Unity WebGL Player | Muster</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico" />
    <link rel="stylesheet" href="TemplateData/style.css" />
    <link rel="stylesheet" href="TemplateData/loading.css" />
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="Build/UnityLoader.js"></script>
    <script src="https://kit.fontawesome.com/fdf90ae6b9.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="TemplateData/tingle.min.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script>
      var gameInstance = UnityLoader.instantiate("unityContainer", "Build/Client.json", {
        onProgress: UnityProgress,
      });
    </script>
  </head>
  <body>
    <!-- Camera display -->
    <div
      class="offcanvas offcanvas-top"
      data-bs-scroll="true"
      data-bs-backdrop="false"
      tabindex="-1"
      id="camera-off-canvas"
      aria-labelledby="offcanvasTopLabel"
    >
      <div class="offcanvas-body p-0 overflow-hidden">
        <div id="video-tiles" class="row h-100 justify-content-center"></div>
      </div>
      <button
        id="camera-toggle"
        class="btn btn-primary shadow-none camera-toggle"
        type="button"
        data-bs-toggle="offcanvas"
        data-bs-target="#camera-off-canvas"
        aria-controls="camera-off-canvas"
        data-toggle="tooltip"
        data-placement="bottom"
        title="Cameras"
      >
        <i id="camera-toggle-icon" class="fas fa-chevron-down"></i>
      </button>
    </div>

    <!-- Camera display end-->
    <audio style="display: none" id="meeting-audio"></audio>
    <div class="webgl-content">
      <div id="unityContainer" style="width: 1280px; height: 720px"></div>
      <div class="footer">
        <div class="fullscreen" onclick="gameInstance.SetFullscreen(1)"></div>
        <div class="title">Muster</div>
      </div>
    </div>

    <!-- BEGIN WEBGL FILE BROWSER LIB -->

    <form id="fileBrowserPopup" style="display: none">
      <div class="fileBrowserBackground"></div>
      <div class="fileBrowserContainer">
        <span style="font-size: 4em; color: #00e2b0">
          <i class="icon fas fa-file-upload"></i>
        </span>
        <span class="fileBrowserText">Click below to open file browser</span>

        <div>
          <label for="closePopup">
            <a class="button6 button-grey">Close</a>
          </label>
          <input
            type="button"
            name="closePopup"
            id="closePopup"
            style="display: none"
            onclick="hidePopup();"
          />
          <label for="fileToUpload">
            <a class="button6 button-green bouncy">Select</a>
          </label>
          <input
            type="File"
            name="fileToUpload"
            id="fileToUpload"
            onchange="sendfile(event);return false;"
          />
        </div>
      </div>
    </form>
    <script type="text/javascript">
      function sendfile(e) {
        var files = e.target.files;
        for (var i = 0, f; (f = files[i]); i++) {
          var reader = new FileReader();
          reader.onload = (function (file) {
            return function (e) {
              gameInstance.SendMessage("FileBrowserDialogLib", "ApplyFileName", escape(file.name));

              (window.filedata = window.filedata ? window.filedata : {})[file.name] =
                e.target.result;
              gameInstance.SendMessage("FileBrowserDialogLib", "FileUpload", file.name);
            };
          })(f);
          reader.readAsArrayBuffer(f);
        }
      }
      function hidePopup() {
        gameInstance.SendMessage("FileBrowserDialogLib", "CloseFilePopupDialog");
      }
    </script>

    <script type="text/javascript">
      function FilterOfTypes(types) {
        document.getElementsByName("fileToUpload")[0].accept = types;
      }
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
      integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
      integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
      crossorigin="anonymous"
    ></script>
    <script src="TemplateData/tingle.min.js"></script>
    <script src="TemplateData/utils/dates.js"></script>
    <script src="TemplateData/amazon-chime-sdk.min.js"></script>
    <script src="TemplateData/main.js"></script>
    <script src="TemplateData/chime.js"></script>
    <script src="TemplateData/pdf.js"></script>
  </body>
</html>
